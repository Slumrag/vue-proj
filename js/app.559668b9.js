(function(){"use strict";var t={7662:function(t,e,a){var r=a(9242),n=a(3396);function s(t,e){const a=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)(a)}var o=a(89);const i={},d=(0,o.Z)(i,[["render",s]]);var l=d,c=a(678),u=a(7139);const h={class:"container"},p={class:"container"},m={class:"flex-container"},f={class:"chart-container"},v={key:0,class:"chart-title"},_=(0,n._)("hr",null,null,-1),g=(0,n._)("footer",{class:"container"},[(0,n._)("p",{class:"footer-text"},'Проект мониторинга параметров здания "Монитор"')],-1);function D(t,e,a,r,s,o){const i=(0,n.up)("nav-block"),d=(0,n.up)("chart-form"),l=(0,n.up)("line-chart");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("header",h,[(0,n.Wm)(i)]),(0,n._)("main",p,[(0,n._)("section",m,[(0,n.Wm)(d,{onSendData:o.requestData},null,8,["onSendData"]),(0,n._)("div",f,[s.loaded?((0,n.wg)(),(0,n.iD)("h2",v,(0,u.zw)(o.chartTitle),1)):(0,n.kq)("",!0),s.loaded?((0,n.wg)(),(0,n.j4)(l,{key:1,class:"chart","chart-data":o.dataset},null,8,["chart-data"])):(0,n.kq)("",!0)])])]),_,g],64)}var y=a(6265),b=a.n(y);const w={class:"nav-block"},S=(0,n.uE)('<h2 class="nav-title"><a href="/">Монитор</a></h2><ul class="nav-menu"><li class="nav-menu__item"><a href="#" class="nav-menu__link">Личный кабинет</a></li><li class="nav-menu__item"><a href="#" class="nav-menu__link">Главная страница</a></li></ul>',2),k=[S];function E(t,e){return(0,n.wg)(),(0,n.iD)("nav",w,k)}const x={},C=(0,o.Z)(x,[["render",E]]);var j=C;const O={class:"form__item"},T=(0,n._)("label",{class:"form__label",for:"sensor-selector"},"Датчик",-1),P=(0,n._)("option",{selected:"",disabled:"",value:""},"Выберите датчик",-1),M=["value"],$={class:"form__item"},A=(0,n._)("label",{class:"form__label",for:"date-start"},"Начало периода",-1),B=["max"],L={class:"form__item"},N=(0,n._)("label",{class:"form__label",for:"date-end"},"Конец периода",-1),Z=["max"],F=["disabled"];function Y(t,e,a,s,o,i){return(0,n.wg)(),(0,n.iD)("form",{onSubmit:e[5]||(e[5]=(0,r.iM)((()=>{}),["prevent"])),action:"",class:"date-form"},[(0,n._)("div",O,[T,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.selectedSensor=t),name:"sensor-selector",id:"sensor",class:"form__selector"},[P,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.sensors,((t,e)=>((0,n.wg)(),(0,n.iD)("option",{key:e,value:t.id},(0,u.zw)(t.name),9,M)))),128))],512),[[r.bM,o.selectedSensor]])]),(0,n._)("div",{onChange:e[3]||(e[3]=(...t)=>i.correctDates&&i.correctDates(...t)),class:"date-fields"},[(0,n._)("div",$,[A,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.dateStart=t),max:i.formatDate(i.today),type:"date",name:"date-start",id:"date-begin",class:"form__field"},null,8,B),[[r.nr,o.dateStart]])]),(0,n._)("div",L,[N,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.dateEnd=t),max:i.formatDate(i.today),type:"date",name:"date-end",id:"date-end",class:"form__field"},null,8,Z),[[r.nr,o.dateEnd]])])],32),(0,n._)("input",{onClick:e[4]||(e[4]=(...t)=>i.sendData&&i.sendData(...t)),disabled:i.isEmpty,type:"submit",value:"Получить данные",class:"form__submit button"},null,8,F)],32)}var q={props:{},data(){return{selectedSensor:"",dateStart:"",dateEnd:"",DAY_IN_MS:864e5,sensors:[]}},methods:{sendData(){this.$emit("sendData",{selectedSensor:this.selectedSensor,selectedType:this.selectedType,dateStart:this.dateStart,dateEnd:this.dateEnd,period:`${this.dateStart}:${this.dateEnd}`}),console.log("id:",this.selectedSensor,"\nНачало периода",this.dateStart,"Конец периода",this.dateEnd)},getSensors(){return console.log("got sensors"),[{id:1,name:"sens1",type:"temp"},{id:2,name:"sens2",type:"visitors"},{id:3,name:"sens2",type:"air"}]},formatDate(t){return t.toISOString().match(/[\d-]+/)[0]},compareDates(t,e){const a=Date.parse(t)-Date.parse(e);return a<0?-1:a>0?1:0},correctDates(){this.compareDates(this.dateStart,this.dateEnd)>0&&(console.log("dates swaped",this.compareDates(this.dateStart,this.dateEnd)),this.dateStart=this.formatDate(new Date(Date.parse(this.dateEnd)-this.DAY_IN_MS)))}},computed:{today(){return new Date},isEmpty(){return!(this.selectedSensor&&this.dateStart&&this.dateEnd)},sensorTypes(){return this.sensors.map((t=>t.type))},selectedType(){return this.sensors.filter((t=>t.id===this.selectedSensor))[0].type},sensorNames(){return this.sensors.map((t=>t.name))}},mounted(){},beforeMount(){const t=this.today,e=new Date(t-7*this.DAY_IN_MS);this.dateStart=this.formatDate(e),this.dateEnd=this.formatDate(t),this.sensors=this.getSensors()}};const I=(0,o.Z)(q,[["render",Y]]);var V=I;function H(t,e,a,r,s,o){const i=(0,n.up)("Bar");return(0,n.wg)(),(0,n.j4)(i,{"chart-data":s.chartData,"chart-options":s.options},null,8,["chart-data","chart-options"])}var R=a(6294),U=a(5140);U.kL.register(U.Dx,U.u,U.De,U.ZL,U.uw,U.f$);var W={name:"BarChart",components:{Bar:R.$Q},data(){return{chartData:{labels:["January","February","March"],datasets:[{label:"Data One",backgroundColor:"#f87979",data:[40,20,12]}]},options:{responsive:!0,maintainAspectRatio:!1}}}};const z=(0,o.Z)(W,[["render",H]]);var J=z;function K(t,e,a,r,s,o){const i=(0,n.up)("Line");return(0,n.wg)(),(0,n.j4)(i,{"chart-options":s.options},null,8,["chart-options"])}U.kL.register(U.Dx,U.u,U.De,U.jn,U.f$,U.od,U.uw);var Q={name:"LineChart",components:{Line:R.x1},data(){return{options:{elements:{point:{radius:0},line:{tension:.1}},plugins:{legend:{display:!1}},scales:{yAxes:{grid:{display:!1}},xAxes:{grid:{display:!0}}},aspectRatio:1.8,responsive:!0,maintainAspectRatio:!0}}},mounted(){console.log("chart mounted")}};const G=(0,o.Z)(Q,[["render",K]]);var X=G,tt={name:"HomeView",components:{NavBlock:j,ChartForm:V,BarChart:J,LineChart:X},data(){return{dataPakage:"vue",dataPakageName:"",period:"",chartType:"",downloads:[],labels:[],loaded:!1,showError:!0,errorMessage:"Please enter a package"}},computed:{dataset(){return{labels:this.labels,datasets:[{label:"",borderColor:"#1C6DD0",pointBackgroundColor:"white",borderWidth:1,pointBorderColor:"#1C6DD0",backgroundColor:"transparent",data:this.downloads}]}},chartTitle(){return`График ${this.chartType}`}},mounted(){},methods:{getFormData(t){this.chartType=t.selectedType,this.period=t.period,console.log("got form data",t,"\ntype",this.chartType)},resetState(){this.loaded=!1,this.showError=!1},requestData(t){null!==this.dataPakage&&""!==this.dataPakage&&"undefined"!==this.dataPakage?(this.resetState(),this.getFormData(t),b().get(`https://api.npmjs.org/downloads/range/${this.period}/${this.dataPakage}`).then((t=>{console.log(t.data),this.downloads=t.data.downloads.map((t=>t.downloads)),this.labels=t.data.downloads.map((t=>t.day)),this.dataPakageName=t.data.dataPakage,this.loaded=!0})).catch((t=>{this.errorMessage=t.response.data.error,this.showError=!0}))):this.showError=!0}}};const et=(0,o.Z)(tt,[["render",D]]);var at=et;const rt=[{path:"/",name:"home",component:at}],nt=(0,c.p7)({history:(0,c.r5)(),routes:rt});var st=nt;(0,r.ri)(l).use(st).mount("#app")}},e={};function a(r){var n=e[r];if(void 0!==n)return n.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,r,n,s){if(!r){var o=1/0;for(c=0;c<t.length;c++){r=t[c][0],n=t[c][1],s=t[c][2];for(var i=!0,d=0;d<r.length;d++)(!1&s||o>=s)&&Object.keys(a.O).every((function(t){return a.O[t](r[d])}))?r.splice(d--,1):(i=!1,s<o&&(o=s));if(i){t.splice(c--,1);var l=n();void 0!==l&&(e=l)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[r,n,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,r){var n,s,o=r[0],i=r[1],d=r[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(d)var c=d(a)}for(e&&e(r);l<o.length;l++)s=o[l],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(c)},r=self["webpackChunkvue_proj"]=self["webpackChunkvue_proj"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(7662)}));r=a.O(r)})();
//# sourceMappingURL=app.559668b9.js.map